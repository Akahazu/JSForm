<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form Registrasi Mahasiswa</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url("background.jpg") no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .form-container {
      background: white;
      padding: 25px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 370px;
      border-top: 6px solid #1e90ff;
      max-height: 95vh;
      overflow-y: auto;
    }

    h2 {
      text-align: center;
      color: #1e90ff;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
      color: #333;
    }

    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      outline: none;
    }

    input:focus, select:focus {
      border-color: #1e90ff;
      box-shadow: 0 0 4px #1e90ff;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #1e90ff;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0d6efd;
    }

    .autocomplete {
      position: relative;
    }

    .autocomplete-items {
      position: absolute;
      border: 1px solid #d4d4d4;
      border-top: none;
      z-index: 99;
      top: 100%;
      left: 0;
      right: 0;
      background-color: white;
      border-radius: 0 0 6px 6px;
      max-height: 150px;
      overflow-y: auto;
    }

    .autocomplete-items div {
      padding: 10px;
      cursor: pointer;
    }

    .autocomplete-items div:hover {
      background-color: #f0f6ff;
    }

    .autocomplete-active {
      background-color: #1e90ff !important;
      color: white;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2>Form Registrasi</h2>
    <form id="registrationForm" autocomplete="off">
      <div class="form-group autocomplete">
        <label for="nama">Nama Mahasiswa</label>
        <input type="text" id="nama" name="nama" placeholder="Masukkan nama" />
      </div>

      <div class="form-group">
        <label for="nim">NIM</label>
        <input type="text" id="nim" name="nim" placeholder="Masukkan NIM" />
      </div>

      <div class="form-group">
        <label for="matkul">Mata Kuliah</label>
        <select id="matkul" name="matkul">
          <option value="">-- Pilih --</option>
          <option value="Matematika">Matematika</option>
          <option value="Ilmu Komputer">Ilmu Komputer</option>
          <option value="Fisika">Fisika</option>
          <option value="Biologi">Biologi</option>
          <option value="Bahasa Inggris">Bahasa Inggris</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dosen">Dosen</label>
        <select id="dosen" name="dosen">
          <option value="">-- Pilih --</option>
          <option value="Budi">Budi</option>
          <option value="Siti">Siti</option>
          <option value="Agus">Agus</option>
          <option value="Dewi">Jono</option>
          <option value="Ratih">Ratih</option>
          <option value="Felix">Felix</option>
          <option value="Cantika">Cantika</option>
          <option value="Yanto">Yanto</option>
        </select>
      </div>

      <div class="form-group">
        <label for="provinsi">Provinsi</label>
        <select id="provinsi">
          <option value="">-- Pilih Provinsi --</option>
          <option value="Banten">Banten</option>
          <option value="Jakarta">Jakarta</option>
          <option value="Jawa Barat">Jawa Barat</option>
          <option value="Jawa Tengah">Jawa Tengah</option>
          <option value="Jawa Timur">Jawa Timur</option>
        </select>
      </div>

      <div class="form-group">
        <label for="kota">Kabupaten / Kota</label>
        <select id="kota">
          <option value="">-- Pilih Kota --</option>
        </select>
      </div>

      <div class="form-group">
        <label for="kecamatan">Kecamatan</label>
        <select id="kecamatan">
          <option value="">-- Pilih Kecamatan --</option>
        </select>
      </div>

      <!-- Output Kode Pos -->
      <div class="form-group">
        <label for="kodepos">Kode Pos</label>
        <input type="text" id="kodepos" readonly />
      </div>

      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    const daftarNama = [
      "Andi Saputra","Budi Santoso","Citra Dewi","Dewi Lestari","Eko Prasetyo",
      "Fitri Handayani","Gilang Pratama","Hariyanto","Indah Permata","Joko Susilo",
      "Kartika Sari","Lestari Wulandari","Made Wirawan","Nur Aisyah","Oka Putra",
      "Putri Ayu","Qori Rahman","Rizki Maulana","Siti Aminah","Teguh Hidayat",
      "Utami Larasati","Vina Marlina","Wahyu Setiawan","Xaverius Bintang",
      "Yuni Safitri","Zaki Ramadhan"
    ];

    function autocomplete(inp, arr) {
      let currentFocus;
      inp.addEventListener("input", function () {
        const val = this.value;
        closeAllLists();
        if (!val) return false;
        currentFocus = -1;
        const listContainer = document.createElement("DIV");
        listContainer.setAttribute("class", "autocomplete-items");
        this.parentNode.appendChild(listContainer);
        for (let i = 0; i < arr.length; i++) {
          if (arr[i].substr(0, val.length).toUpperCase() === val.toUpperCase()) {
            const item = document.createElement("DIV");
            item.innerHTML = `<strong>${arr[i].substr(0, val.length)}</strong>${arr[i].substr(val.length)}`;
            item.innerHTML += `<input type='hidden' value='${arr[i]}' />`;
            item.addEventListener("click", function () {
              inp.value = this.getElementsByTagName("input")[0].value;
              closeAllLists();
            });
            listContainer.appendChild(item);
          }
        }
      });

      inp.addEventListener("keydown", function (e) {
        let items = document.querySelector(".autocomplete-items");
        if (items) items = items.getElementsByTagName("div");
        if (e.keyCode === 40) {
          currentFocus++;
          addActive(items);
        } else if (e.keyCode === 38) {
          currentFocus--;
          addActive(items);
        } else if (e.keyCode === 13) {
          e.preventDefault();
          if (currentFocus > -1 && items) items[currentFocus].click();
        }
      });

      function addActive(items) {
        if (!items) return false;
        removeActive(items);
        if (currentFocus >= items.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = items.length - 1;
        items[currentFocus].classList.add("autocomplete-active");
      }

      function removeActive(items) {
        for (let i = 0; i < items.length; i++) {
          items[i].classList.remove("autocomplete-active");
        }
      }

      function closeAllLists(elmnt) {
        const items = document.querySelectorAll(".autocomplete-items");
        for (let i = 0; i < items.length; i++) {
          if (elmnt !== items[i] && elmnt !== inp) {
            items[i].parentNode.removeChild(items[i]);
          }
        }
      }

      document.addEventListener("click", function (e) {
        closeAllLists(e.target);
      });
    }

    autocomplete(document.getElementById("nama"), daftarNama);

    const dataWilayah = {
      "Banten": {
        "Serang": { "Cipocok Jaya": "42121", "Curug": "42171", "Walantaka": "42183" },
        "Tangerang": { "Ciledug": "15151", "Karawaci": "15113", "Cipondoh": "15148" },
        "Cilegon": { "Ciwandan": "42441", "Jombang": "42411", "Purwakarta": "42431" }
      },
      "Jakarta": {
        "Jakarta Pusat": { "Menteng": "10310", "Gambir": "10110", "Tanah Abang": "10230" },
        "Jakarta Barat": { "Palmerah": "11480", "Grogol Petamburan": "11450", "Cengkareng": "11730" },
        "Jakarta Selatan": { "Kebayoran Baru": "12110", "Pasar Minggu": "12520", "Tebet": "12810" }
      },
      "Jawa Barat": {
        "Bandung": { "Coblong": "40134", "Sukajadi": "40162", "Lengkong": "40261" },
        "Bogor": { "Bogor Tengah": "16121", "Bogor Selatan": "16131", "Tanah Sareal": "16161" },
        "Bekasi": { "Bekasi Timur": "17111", "Bekasi Barat": "17131", "Mustika Jaya": "17158" }
      },
      "Jawa Tengah": {
        "Semarang": { "Candisari": "50252", "Pedurungan": "50192", "Banyumanik": "50263" },
        "Solo": { "Banjarsari": "57137", "Laweyan": "57148", "Jebres": "57126" },
        "Magelang": { "Magelang Utara": "56111", "Magelang Tengah": "56121", "Magelang Selatan": "56131" }
      },
      "Jawa Timur": {
        "Surabaya": { "Tegalsari": "60262", "Wonokromo": "60243", "Genteng": "60272" },
        "Malang": { "Klojen": "65111", "Lowokwaru": "65141", "Blimbing": "65126" },
        "Kediri": { "Kota": "64121", "Mojoroto": "64114", "Pesantren": "64131" }
      }
    };

    const provinsiSelect = document.getElementById("provinsi");
    const kotaSelect = document.getElementById("kota");
    const kecamatanSelect = document.getElementById("kecamatan");
    const kodeposInput = document.getElementById("kodepos");

    provinsiSelect.addEventListener("change", function() {
      kotaSelect.innerHTML = "<option value=''>-- Pilih Kota --</option>";
      kecamatanSelect.innerHTML = "<option value=''>-- Pilih Kecamatan --</option>";
      kodeposInput.value = "";
      const selectedProv = this.value;
      if (selectedProv && dataWilayah[selectedProv]) {
        Object.keys(dataWilayah[selectedProv]).forEach(kota => {
          const opt = document.createElement("option");
          opt.value = kota;
          opt.textContent = kota;
          kotaSelect.appendChild(opt);
        });
      }
    });

    kotaSelect.addEventListener("change", function() {
      kecamatanSelect.innerHTML = "<option value=''>-- Pilih Kecamatan --</option>";
      kodeposInput.value = "";
      const selectedProv = provinsiSelect.value;
      const selectedKota = this.value;
      if (selectedProv && selectedKota && dataWilayah[selectedProv][selectedKota]) {
        Object.keys(dataWilayah[selectedProv][selectedKota]).forEach(kec => {
          const opt = document.createElement("option");
          opt.value = kec;
          opt.textContent = kec;
          kecamatanSelect.appendChild(opt);
        });
      }
    });

    kecamatanSelect.addEventListener("change", function() {
      const selectedProv = provinsiSelect.value;
      const selectedKota = kotaSelect.value;
      const selectedKec = this.value;
      if (selectedProv && selectedKota && selectedKec) {
        kodeposInput.value = dataWilayah[selectedProv][selectedKota][selectedKec];
      }
    });

    document.getElementById("registrationForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const nama = document.getElementById("nama").value;
      const nim = document.getElementById("nim").value;
      const matkul = document.getElementById("matkul").value;
      const dosen = document.getElementById("dosen").value;
      const prov = provinsiSelect.value;
      const kota = kotaSelect.value;
      const kec = kecamatanSelect.value;
      const kodepos = kodeposInput.value;

      if (!nama || !nim || !matkul || !dosen || !prov || !kota || !kec || !kodepos) {
        alert("Mohon lengkapi semua data.");
        return;
      }

      alert(`Data berhasil:\nNama: ${nama}\nNIM: ${nim}\nMata Kuliah: ${matkul}\nDosen: ${dosen}\nProvinsi: ${prov}\nKota: ${kota}\nKecamatan: ${kec}\nKode Pos: ${kodepos}`);
    });
  </script>
</body>
</html>
